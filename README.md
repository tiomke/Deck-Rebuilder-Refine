# README

Deck Rebuilder 是 Global Game Jam 2020 作品，[Deck Rebuilder-GGJ 主页](https://v3.globalgamejam.org/2020/games/deck-deck-9) 在线体验：[Deck Rebuilder-itch.io主页](https://pinksparkle.itch.io/deck-rebuilder)

本项目基于 Deck Rebuilder 的数值做了若干改进，是一个数值系统验证 Demo 。

项目基于 Godot 4.2.2

## Deck Rebuilder 分析

### 游戏机制

玩家自己战船有攻击、闪避、血量三个属性，对方战船同样有这些属性。对方战船攻击玩家时，根据最大伤害和玩家闪避随机给玩家的三个属性产生伤害；玩家攻击战船时，则根据最大伤害和敌方战船的闪避将伤害都施加到战船的血量上。

如果一方血量为0，则游戏结束。双方血量同时为0的情况下，判玩家失败。

玩家需要使用卡牌修复战船的属性，迎接下一轮战斗。玩家需要考量如何使用有限的资源点，对战船的不同属性进行修复。

属性本身有上限，高费高修复的卡牌不一定就是最好的。

使用卡牌需要消耗资源点数，每个卡牌消耗的资源点数不同，能给战船修复的属性类型和点数也不同。

战斗获胜后，玩家可以从敌方获得新的卡牌，三选一。

操作和结算分离，玩家操作完卡牌后，再进行自动战斗。

### 数值设计

卡牌分Cannon、Sail、Hull、Resource 四种类型，Cannon、Sail、Hull分别对应 Attack、Evade、Health 三种属性的恢复。船的三种属性都有固定的上限 8 点。

对于每种用于修复属性的卡牌，都有一下几种面值：

| 资源花费 | 修复点数 |
| ---- | ---- |
| 1    | 1    |
| 1    | 2    |
| 2    | 3    |
| 2    | 4    |
| 3    | 5    |

初始牌堆共 18 张牌，初始牌堆中没有资源牌，每种属性牌各6张。

| 卡牌名称       | 数量  |
| ---------- | --- |
| Cannon-1-1 | 3   |
| Cannon-2-3 | 2   |
| Cannon-3-5 | 1   |
| Sail-1-1   | 3   |
| Sail-2-3   | 2   |
| Sail-3-5   | 1   |
| Hull-1-1   | 3   |
| Hull-2-3   | 2   |
| Hull-3-5   | 1   |

#### 伤害计算

每轮最多10点伤害，最终实际伤害为 $D_i$ 的累计值。

$Damage = \sum_{i=1}^{10} D_i$

伤害 $D_i$ 由 $1-100$ 的随机数 $R_i$ 和权重值 $T$ 确定。 $T$ 越大，越不容易造成伤害。

$T$ 的值由受击方的闪避点数（也就是 Evade ）决定。

$T=5*(\text{Evade}+1)$

伤害用指示函数（括号内条件为真时为1，为假时为0）表示形式如下：

$Damage = \sum_{i=1}^{10} \left[ R_i > T \right]$

这些伤害会随机扣除到敌方的 Attack、Evade、Health 三个属性中，如果某个属性被连续扣掉两点，那么下一次将不会被扣除到。

#### 关卡数值

Boss 的闪避值固定为 20%，前四关血量以 10 为基础每关涨2点，之后以 25 为基础每关涨2点。Boss 最大伤害则以 10 为基础，每关涨 1 点。

| 关卡  | Boss血量 | Boss闪避 | Boss最大伤害 |
| --- | ------ | ------ | -------- |
| 1   | 10     | 20%    | 10       |
| 2   | 12     | 20%    | 11       |
| 3   | 14     | 20%    | 12       |
| 4   | 16     | 20%    | 13       |
| 5   | 25     | 20%    | 14       |

### 交互设计

本作巧妙利用水平线将战斗部分和玩家操作部分分割开来。

本作的卡牌表现部分比较平铺直叙，直接将卡牌放置在固定的位置，展示卡牌的效果。


### 存在的问题

由于没有换卡的机制，手牌中可能没有自己想要的牌，此时将没有任何操作空间，影响游戏体验。

此外双方战斗的结果，随机性很高，即使没有任何策略问题，也很可能在前几关就死亡。

一关战斗结束后，获得的道具，除了资源牌，其他都是已有牌型，获取之后并不会增加策略深度，只能在一定程度上积攒低费高收益的牌。

当某属性降为0时，即使收到伤害也不会再降。因此，在血量充足的情况下，完全可以无视闪避属性的情况，导致闪避属性的设计比较鸡肋，只有当没有血量牌可以用时，才勉强拿闪避牌减少扣血。

## 本作改进点

- 元素匹配 - 影响卡牌资源点消耗，选择多元化
- 移除闪避属性 - 改为玩家固定 90% 命中率
- 抽卡机制 - 某些卡牌可以再抽一张牌，缓解无牌可用的局面

详情可直接阅读源码，核心数值均在 `deck_builder_model.gd` 文件中。



